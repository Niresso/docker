<VirtualHost *:80>
	ServerName localhost.com
	ServerAlias localhost.com *.localhost.com
	ServerAdmin webmaster@localhost
	RewriteEngine On	
	LogLevel info rewrite:trace5

	<Directory /> 
		AllowOverride none 
		Require all granted
	</Directory>
	
	VirtualDocumentRoot /var/www/%1.0/public

	 <DirectoryMatch "/var/www/(?<sitename>[a-zA-Z-]+)/public">
		Options -Indexes +FollowSymLinks -ExecCGI +MultiViews
		AllowOverride All

		RewriteEngine on
		RewriteBase /
		RewriteOptions InheritBefore
		ErrorDocument 404 /404.html

		RewriteCond %{REQUEST_FILENAME} !-f
		RewriteCond %{REQUEST_FILENAME} !-d
		RewriteCond %{REQUEST_FILENAME} !-l

		RewriteRule  .+  fcgi://php:9000/var/www/%{env:MATCH_SITENAME}/public/index.php [L,P]

		<Files *.ini>
			Order deny,allow
			Deny from all
		</Files>

		Header add X-Frame-Options "SAMEORIGIN"
		Header set X-Content-Type-Options "nosniff"
		Header set X-XSS-Protection "1; mode=block"
		Header unset X-Powered-By
		Header unset Last-Modified
		Header set Cache-Control "no-cache, private"

		RedirectMatch  404 ^/(imgs|sdk|fonts|css|img|js)(\/readme|)/?$

		Order allow,deny
    	allow from all

	</DirectoryMatch>
</VirtualHost>